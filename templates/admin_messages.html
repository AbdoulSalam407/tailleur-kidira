{% extends 'base.html' %}

{% block title %}Messages reçus - Admin{% endblock %}

{% block content %}
<h2 class="text-center mb-4 fw-bold" style="color:#3b82f6;">
  <i class="bi bi-envelope-paper"></i> Messages reçus
</h2>

{% if messages %}
  <div class="table-responsive">
    <table class="table table-bordered table-striped align-middle shadow-sm rounded-3 overflow-hidden">
      <thead class="table-dark">
        <tr>
          <th>#</th>
          <th>Nom</th>
          <th>Email</th>
          <th>Message</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody>
        {% for m in messages %}
        <tr>
          <td class="fw-bold">{{ m['id'] }}</td>
          <td>{{ m['nom'] }}</td>
          <td>{{ m['email'] }}</td>
          <td style="max-width:250px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis;">
            {{ m['message'] }}
          </td>
          <td>
            <a href="{{ url_for('supprimer_message', id=m['id']) }}"
               class="btn btn-sm btn-danger"
               onclick="return confirm('Supprimer ce message ?')">
               <i class="bi bi-trash"></i> Supprimer
            </a>
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
{% else %}
  <p class="text-muted text-center">Aucun message reçu pour le moment.</p>
{% endif %}

<a href="{{ url_for('admin_dashboard') }}" class="btn btn-secondary mt-3 fw-semibold">
  <i class="bi bi-house-door"></i> Retour au tableau de bord
</a>
{% endblock %}
